<div
  x-data="articleEditorLogic()"
  x-init="init()"
  class="h-100 d-flex flex-column"
>
  <template x-if="!filename">
    <div class="p-3 text-muted small">
      Select or create an article to begin editing.
    </div>
  </template>
  <template x-if="filename">
    <div class="d-flex flex-column h-100">
      <div
        class="d-flex align-items-center justify-content-between px-3 py-2 border-bottom bg-light"
      >
        <strong x-text="filename"></strong>
        <div class="d-flex gap-2">
          <span
            class="spinner-border spinner-border-sm"
            role="status"
            x-show="loading || saving"
          ></span>
          <button
            class="btn btn-sm btn-success"
            @click="save"
            :disabled="saving || !dirty()"
          >
            Save
          </button>
        </div>
      </div>
      <div class="flex-grow-1 p-3 overflow-auto">
        <textarea
          class="form-control"
          x-model="content"
          :disabled="loading"
          style="height: 100%; font-family: monospace; white-space: pre"
          spellcheck="false"
        ></textarea>
      </div>
      <div class="px-3 py-1 small text-muted border-top" x-show="dirty()">
        Unsaved changes
      </div>
    </div>
  </template>
</div>
